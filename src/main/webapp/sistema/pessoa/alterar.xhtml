<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<h:form id="formAlterar">

		<p:hotkey bind="esc" action="#{pessoaController.cancelar}" immediate="true" />

		<p:messages id="messages" showDetail="true" closable="true" showSummary="false">
			<p:autoUpdate />
		</p:messages>



		<p:tabView id="tabViewPessoa">

			<p:tab title="Pessoa" id="tabPessoa">
				<p:focus context="panelGridPessoa" />
				<h:panelGrid id="panelGridPessoa" columns="2">

					<p:row>
						<p:outputLabel value="Código" for="txtCodigo"
							rendered="#{pessoaController.pessoaModel.codigo != null}" />

						<p:outputLabel value="Nome" for="txtNome" />
					</p:row>
					<p:row>
						<p:inputText id="txtCodigo" value="#{pessoaController.pessoaModel.codigo}" readonly="true"
							rendered="#{pessoaController.pessoaModel.codigo != null}" style="width:50px" />

						<p:inputText id="txtNome" maxlength="50" value="#{pessoaController.pessoaModel.nome}"
							required="true" requiredMessage="Nome obrigatório." style="width:200px" />

					</p:row>

					<h:panelGrid columns="2">
						<p:outputLabel for="slctSexo" value="Sexo:" />
						<p:selectOneRadio id="slctSexo" value="#{pessoaController.pessoaModel.sexo}" required="true"
							requiredMessage="Sexo obrigatório.">

							<f:selectItems value="#{pessoaController.pessoaModel.sexo.sexos}" />
						</p:selectOneRadio>
					</h:panelGrid>

					<p:outputLabel value="E-mail" for="txtEmail" />
					<p:inputText id="txtEmail" style="width:300px" maxlength="50"
						value="#{pessoaController.pessoaModel.email}" required="true"
						requiredMessage="Email obrigatório." validatorMessage="Email inválido.">
						<f:validateRegex
							pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
					</p:inputText>

					<p:outputLabel value="Endereço" for="txtEndereco" />
					<p:inputText id="txtEndereco" style="width:400px" maxlength="100"
						value="#{pessoaController.pessoaModel.endereco}" required="true"
						requiredMessage="Endereço obrigatório." />

				</h:panelGrid>
			</p:tab>
			<p:tab title="Usuário" id="tabUsuario">
				<h:panelGrid columns="1" cellpadding="2"
					rendered="#{pessoaController.pessoaModel.usuarioModel == null}">

					<p:outputLabel value="Esta Pessoa não possui Usuário." />

					<p:separator />

					<p:commandButton value="Incluir Usuário" id="btnIncluirUsuario" icon="ui-icon-plus"
						action="#{pessoaController.incluirUsuario}" update="tabViewPessoa" immediate="true" />

				</h:panelGrid>
				<h:panelGrid columns="1" cellpadding="2"
					rendered="#{pessoaController.pessoaModel.usuarioModel != null}">

					<p:outputLabel value="Código" for="txtCodigoUsuario"
						rendered="#{pessoaController.pessoaModel.usuarioModel.codigo != null}" />
					<p:inputText id="txtCodigoUsuario" value="#{pessoaController.pessoaModel.usuarioModel.codigo}"
						style="width:50px" readonly="true"
						rendered="#{pessoaController.pessoaModel.usuarioModel.codigo != null}" />

					<p:outputLabel value="Nome" for="txtNomeUsuario" />
					<p:inputText id="txtNomeUsuario" style="width:300px" maxlength="15"
						value="#{pessoaController.pessoaModel.usuarioModel.nome}" required="true"
						requiredMessage="Nome de usuário obrigatório."
						validator="#{pessoaController.isNomeUsuarioValido}" />


					<p:outputLabel value="Senha" for="txtSenha" />
					<p:password id="txtSenha" style="width:300px" maxlength="50"
						value="#{pessoaController.pessoaModel.usuarioModel.senha}" required="true"
						requiredMessage="Senha obrigatória." match="txtConfirmacaoSenha" />

					<p:outputLabel value="Senha de Confirmação" for="txtConfirmacaoSenha" />
					<p:password id="txtConfirmacaoSenha" style="width:300px" maxlength="50" required="true"
						requiredMessage="Senha de confirmação obrigatória." />

					<p:separator />

					<p:commandButton value="Excluir Usuário" id="btnExcluirUsuario" icon="ui-icon-trash"
						action="#{pessoaController.excluirUsuario}" update="tabViewPessoa" immediate="true"
						style="right:0">
						<p:confirm header="Confirmação" message="Deseja mesmo excluir?" icon="ui-icon-alert" />
					</p:commandButton>

				</h:panelGrid>
			</p:tab>
		</p:tabView>

		<h:panelGrid cellpadding="10">
			<h:column>
				<p:commandButton value="Salvar" id="btnSalvar" icon="ui-icon-gear"
					action="#{pessoaController.salvar}" update="form-consulta" />

				<p:commandButton value="Cancelar" id="btnCancelar" icon="ui-icon-close"
					action="#{pessoaController.cancelar}" immediate="true" />
			</h:column>


		</h:panelGrid>

		<p:defaultCommand target="btnSalvar" />
	</h:form>

</ui:composition>